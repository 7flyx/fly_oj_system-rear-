import"./request-DBKoyywz.js";/* empty css                  *//* empty css                  *//* empty css              */import{g as F,d as L,p as O,c as R}from"./exam-Cm2pr6XW.js";import{e as h,r as k,c as g,b as a,g as n,S as A,P as W,T as X,U as Y,o as s,i,u as Z,V as q,W as m,f as x,d as b,Y as G,N as H,E as J,O as K,X as M,Z as Q}from"./index-01c_CFXq.js";const ee={key:0},te={key:1},ae={key:0},ne={key:1},re={__name:"Exam",setup(le){function f(o){const e=new Date;return new Date(o.startTime)>e}const l=h({pageNum:1,pageSize:10,startTime:"",endTime:"",title:""}),v=k([]),E=k(0),r=k([]);async function u(){r.value[0]instanceof Date&&(l.startTime=r.value[0].toISOString()),r.value[1]instanceof Date&&(l.endTime=r.value[1].toISOString());const o=await F(l);v.value=o.rows,E.value=o.total}u();function C(o){l.pageNum=1,u()}function S(o){u()}function T(){l.pageNum=1,u()}function z(){l.pageNum=1,l.pageSize=10,l.title="",l.startTime="",l.endTime="",r.value.length=0,u()}function N(){b.push("/oj/layout/updateExam?type=add")}async function V(o){b.push(`/oj/layout/updateExam?type=edit&examId=${o}`)}async function I(o){await L(o),l.pageNum=1,u()}async function w(o){await O(o),u()}async function P(o){await R(o),u()}return(o,e)=>{const D=G,_=H,U=J,p=K,$=W,d=M,c=Q,B=X,j=Y;return s(),g(A,null,[a($,{inline:"true"},{default:n(()=>[a(_,{label:"创建日期"},{default:n(()=>[a(D,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),style:{width:"240px"},type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),a(_,{label:"竞赛名称"},{default:n(()=>[a(U,{modelValue:l.title,"onUpdate:modelValue":e[1]||(e[1]=t=>l.title=t),placeholder:"请您输入要搜索的竞赛名称"},null,8,["modelValue"])]),_:1}),a(_,null,{default:n(()=>[a(p,{onClick:T,plain:""},{default:n(()=>e[4]||(e[4]=[i("搜索")])),_:1}),a(p,{onClick:z,plain:"",type:"info"},{default:n(()=>e[5]||(e[5]=[i("重置")])),_:1}),a(p,{type:"primary",icon:Z(q),plain:"",onClick:N},{default:n(()=>e[6]||(e[6]=[i("添加竞赛")])),_:1},8,["icon"])]),_:1})]),_:1}),a(B,{height:"526px",data:v.value},{default:n(()=>[a(d,{prop:"title",label:"竞赛标题"}),a(d,{prop:"startTime",width:"180px",label:"竞赛开始时间"}),a(d,{prop:"endTime",width:"180px",label:"竞赛结束时间"}),a(d,{label:"是否开赛",width:"100px"},{default:n(({row:t})=>[f(t)?(s(),g("div",te,[a(c,{type:"info"},{default:n(()=>e[8]||(e[8]=[i("未开赛")])),_:1})])):(s(),g("div",ee,[a(c,{type:"warning"},{default:n(()=>e[7]||(e[7]=[i("已开赛")])),_:1})]))]),_:1}),a(d,{prop:"status",width:"100px",label:"是否发布"},{default:n(({row:t})=>[t.status==0?(s(),g("div",ae,[a(c,{type:"danger"},{default:n(()=>e[9]||(e[9]=[i("未发布")])),_:1})])):m("",!0),t.status==1?(s(),g("div",ne,[a(c,{type:"success"},{default:n(()=>e[10]||(e[10]=[i("已发布")])),_:1})])):m("",!0)]),_:1}),a(d,{prop:"createName",width:"140px",label:"创建用户"}),a(d,{prop:"createTime",width:"180px",label:"创建时间"}),a(d,{label:"操作",width:"180px"},{default:n(({row:t})=>[f(t)&&t.status==0?(s(),x(p,{key:0,type:"text",onClick:y=>V(t.examId)},{default:n(()=>e[11]||(e[11]=[i("编辑 ")])),_:2},1032,["onClick"])):m("",!0),f(t)&&t.status==0?(s(),x(p,{key:1,type:"text",onClick:y=>I(t.examId),class:"red"},{default:n(()=>e[12]||(e[12]=[i("删除 ")])),_:2},1032,["onClick"])):m("",!0),t.status==1&&f(t)?(s(),x(p,{key:2,type:"text",onClick:y=>P(t.examId)},{default:n(()=>e[13]||(e[13]=[i("撤销发布")])),_:2},1032,["onClick"])):m("",!0),t.status==0&&f(t)?(s(),x(p,{key:3,type:"text",onClick:y=>w(t.examId)},{default:n(()=>e[14]||(e[14]=[i("发布")])),_:2},1032,["onClick"])):m("",!0),f(t)?m("",!0):(s(),x(p,{key:4,type:"text"},{default:n(()=>e[15]||(e[15]=[i("已开赛，不允许操作")])),_:1}))]),_:1})]),_:1},8,["data"]),a(j,{background:"",size:"small",layout:"total, sizes, prev, pager, next, jumper",total:E.value,"current-page":l.pageNum,"onUpdate:currentPage":e[2]||(e[2]=t=>l.pageNum=t),"page-size":l.pageSize,"onUpdate:pageSize":e[3]||(e[3]=t=>l.pageSize=t),"page-sizes":[5,10,15,20],onSizeChange:C,onCurrentChange:S},null,8,["total","current-page","page-size"])],64)}}};export{re as default};
